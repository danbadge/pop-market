"use strict";angular.module("popMarketApp",["ngCookies","ngResource","ngSanitize","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"RetreiveArtistStocks"}).otherwise({redirectTo:"/"})}]),angular.module("popMarketApp").factory("Stock",function(){function a(a){this.chartPosition=a,this.price=b(a),this.totalShares=1e3,this.availability=1e3,this.formattedPrice="£"+this.price.toFixed(2)}function b(a){var b=1,c=40;return Math.random()*(c-a)+b}return a.prototype.from=function(a){return this.price=a.price,this.totalShares=1e3,this.availability=a.availability,this.formattedPrice="£"+this.price.toFixed(2),this},a.prototype.buy=function(){this.availability-=10,this.increasePrice()},a.prototype.sell=function(){this.availability+=10,this.decreasePrice()},a.prototype.increasePrice=function(){this.updatePriceBasedOn(1)},a.prototype.decreasePrice=function(){this.updatePriceBasedOn(-1)},a.prototype.updatePriceBasedOn=function(a){if(0===this.availability%40){var b=1e-4*this.availability+5e-4*(this.totalShares-this.availability);this.price+=.001*this.price+a*b*this.price,this.formattedPrice="£"+this.price.toFixed(2)}},a}).factory("UserService",["$rootScope",function(a){return a.balance=1e3,a.formattedBalance="£"+a.balance.toFixed(2),{spent:function(b){a.balance-=b,a.formattedBalance="£"+a.balance.toFixed(2)},sold:function(b){a.balance+=b,a.formattedBalance="£"+a.balance.toFixed(2)}}}]).controller("RetreiveArtistStocks",["$scope","Stock","UserService",function(a,b,c){a.artists=[{chartPosition:1,name:"John Newman",stock:new b(1)},{chartPosition:2,name:"Reconnected",stock:new b(2)},{chartPosition:3,name:"Miley Cyrus",stock:new b(3)},{chartPosition:4,name:"Lissie",stock:new b(4)},{chartPosition:5,name:"The Saturdays",stock:new b(5)},{chartPosition:6,name:"Anthrax",stock:new b(6)},{chartPosition:7,name:"Paul McCartney",stock:new b(7)},{chartPosition:8,name:"James Blunt",stock:new b(8)},{chartPosition:9,name:"Katy Perry",stock:new b(9)},{chartPosition:10,name:"Eminem",stock:new b(10)}],a.buy=function(a){1!==a.stock.availability&&(a.stock=new b(a.stock.chartPosition).from(a.stock),a.stock.buy(),c.spent(a.stock.price))},a.sell=function(a){a.stock.availability>999||(a.stock=new b(a.stock.chartPosition).from(a.stock),a.stock.sell(),c.sold(a.stock.price))}}]);